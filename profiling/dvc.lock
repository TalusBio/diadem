schema: '2.0'
stages:
  tims_run_hela:
    cmd: mkdir -p results/tims && python src/run.py --config configs/tims.toml --fasta
      profiling_data/UP000005640_9606_crap.fasta --ms_data profiling_data/230426_Hela_01_S4-E5_1_662.hdf
      --output results/tims/hela --threads 4 && python src/plot_results.py results/tims
      --prefix hela
    deps:
    - path: profiling_data/230426_Hela_01_S4-E5_1_662.hdf
      md5: 02f5846145d04ff9301f78d2b6299b75
      size: 4412473566
    - path: profiling_data/UP000005640_9606_crap.fasta
      md5: 6a22e753f0e35eae9e0bf3d95759d089
      size: 13676378
    - path: src/plot_results.py
      md5: 40c50f61109cef915787809f114d4534
      size: 4144
    - path: src/run.py
      md5: f966b8a2ebd379bccd7fdb238376be5a
      size: 1096
    params:
      configs/tims.toml:
        db_bucket_size: 32768
        db_enzyme: trypsin
        db_max_missed_cleavages: 2
        g_ims_tolerance: 0.01
        g_ims_tolerance_unit: abs
        g_tolerance_units:
        - da
        - da
        g_tolerances:
        - 0.02
        - 0.02
        ion_charges:
        - 1
        ion_mz_range:
        - 250
        - 2000.0
        ion_series: by
        peptide_length_range:
        - 7
        - 25
        peptide_mz_range:
        - 400
        - 2000
        precursor_charges:
        - 2
        - 3
        run_allowed_fails: 5000
        run_debug_log_frequency: 50
        run_deconvolute_spectra: true
        run_max_peaks: 20000
        run_max_peaks_per_spec: 5000
        run_max_peaks_per_window: 150
        run_min_correlation_score: 0.2
        run_min_intensity_ratio: 0.01
        run_min_peak_intensity: 100
        run_parallelism: 1
        run_scaling_limits:
        - 0.001
        - 0.9
        run_scaling_ratio: 0.001
        run_window_size: 21
        scoring_score_function: Hyperscore
    outs:
    - path: results/tims/hela.diadem.csv
      md5: 9d3443227ddc4d7c0c742548336e4e9a
      size: 15179553
    - path: results/tims/hela_log_score_histogram_peptide.png
      md5: 3b04c6c5d0871886be7c9c366cd558ec
      size: 22777
    - path: results/tims/hela_metrics.toml
      md5: 09084e593d8fdf09d7bbd709cd2554a0
      size: 166
    - path: results/tims/hela_peptide_qval.png
      md5: c072d28be5b8841ff8d11978959600f9
      size: 19948
    - path: results/tims/hela_runtime.toml
      md5: 64102b1326c7c90d2b8233586c30356b
      size: 28
    - path: results/tims/hela_score_histogram_peptide.png
      md5: 03826bdd891ad915a2187016b8a82a6b
      size: 21475
    - path: results/tims/hela_score_histogram_psm.png
      md5: 3e88a2f284818880ba3abddc95d7b465
      size: 22476
  tims_run_ecoli:
    cmd: python src/run.py --config configs/tims.toml --fasta profiling_data/UP000000625_83333_crap.fasta
      --ms_data profiling_data/LFQ_timsTOFPro_diaPASEF_Ecoli_01.hdf --output results/tims/ecoli
      --threads 4 && python src/plot_results.py results/tims --prefix ecoli
    deps:
    - path: profiling_data/LFQ_timsTOFPro_diaPASEF_Ecoli_01.hdf
      md5: 764764d9da856aab25d562b4c8c835e2
      size: 17521478250
    - path: profiling_data/UP000000625_83333_crap.fasta
      md5: 1b9a2db686eb2024edbd33b7f24117ef
      size: 1891750
    - path: src/plot_results.py
      md5: 40c50f61109cef915787809f114d4534
      size: 4144
    - path: src/run.py
      md5: f966b8a2ebd379bccd7fdb238376be5a
      size: 1096
    params:
      configs/tims.toml:
        db_bucket_size: 32768
        db_enzyme: trypsin
        db_max_missed_cleavages: 2
        g_ims_tolerance: 0.01
        g_ims_tolerance_unit: abs
        g_tolerance_units:
        - da
        - da
        g_tolerances:
        - 0.02
        - 0.02
        ion_charges:
        - 1
        ion_mz_range:
        - 250
        - 2000.0
        ion_series: by
        peptide_length_range:
        - 7
        - 25
        peptide_mz_range:
        - 400
        - 2000
        precursor_charges:
        - 2
        - 3
        run_allowed_fails: 5000
        run_debug_log_frequency: 50
        run_deconvolute_spectra: true
        run_max_peaks: 20000
        run_max_peaks_per_spec: 5000
        run_max_peaks_per_window: 150
        run_min_correlation_score: 0.2
        run_min_intensity_ratio: 0.01
        run_min_peak_intensity: 100
        run_parallelism: 1
        run_scaling_limits:
        - 0.001
        - 0.9
        run_scaling_ratio: 0.001
        run_window_size: 21
        scoring_score_function: Hyperscore
    outs:
    - path: results/tims/ecoli.diadem.csv
      md5: 999fb7588b75653e5a245753bf4b4070
      size: 70538015
    - path: results/tims/ecoli_log_score_histogram_peptide.png
      md5: df9d4b3a8a21c54ae46b476ec0697224
      size: 23229
    - path: results/tims/ecoli_metrics.toml
      md5: 2378083c6eaabd6388fdd73b3af98023
      size: 166
    - path: results/tims/ecoli_peptide_qval.png
      md5: 9d80063795191cb4433691ed5fb94aa9
      size: 18384
    - path: results/tims/ecoli_runtime.toml
      md5: b7bd5b6fbb274240aacd6b03b72cc944
      size: 29
    - path: results/tims/ecoli_score_histogram_peptide.png
      md5: e0edfb0a28f3c264c6de36dd1d38c9b4
      size: 20845
    - path: results/tims/ecoli_score_histogram_psm.png
      md5: 0b62302a8e3cbd56d80084501158cd49
      size: 24514
  get_data:
    cmd: zsh src/get_data.zsh
    deps:
    - path: Dockerfile
      md5: a5f9ec03e6ab364f6179b60079fba806
      size: 264
    - path: src/get_data.zsh
      md5: 93a8ffd96d32f08c2977abe8ab028646
      size: 2068
    outs:
    - path: profiling_data/230407_Chrom_60m_1ug_v2_01.mzML
      md5: 19efb578f116318ce63f707dd0193ad9
      size: 1452019888
    - path: profiling_data/230426_Hela_01_S4-E5_1_662.hdf
      md5: 02f5846145d04ff9301f78d2b6299b75
      size: 4412473566
    - path: profiling_data/23aug2017_hela_serum_timecourse_4mz_narrow_3.mzML
      md5: 678d652ab60b0e4aa3c4329f22e9297b
      size: 1696580265
    - path: profiling_data/LFQ_timsTOFPro_diaPASEF_Ecoli_01.hdf
      md5: 764764d9da856aab25d562b4c8c835e2
      size: 17521478250
    - path: profiling_data/UP000000625_83333_crap.fasta
      md5: 1b9a2db686eb2024edbd33b7f24117ef
      size: 1891750
    - path: profiling_data/UP000005640_9606_crap.fasta
      md5: 6a22e753f0e35eae9e0bf3d95759d089
      size: 13676378
  orbi_run_hela:
    cmd: mkdir -p results/orbi && python src/run.py --config configs/orbi.toml --fasta
      profiling_data/UP000005640_9606_crap.fasta --ms_data profiling_data/230407_Chrom_60m_1ug_v2_01.mzML
      --output results/orbi/hela --threads 4 && python src/plot_results.py results/orbi
      --prefix hela
    deps:
    - path: profiling_data/230407_Chrom_60m_1ug_v2_01.mzML
      md5: 19efb578f116318ce63f707dd0193ad9
      size: 1452019888
    - path: profiling_data/UP000005640_9606_crap.fasta
      md5: 6a22e753f0e35eae9e0bf3d95759d089
      size: 13676378
    - path: src/plot_results.py
      md5: 40c50f61109cef915787809f114d4534
      size: 4144
    - path: src/run.py
      md5: f966b8a2ebd379bccd7fdb238376be5a
      size: 1096
    params:
      configs/orbi.toml:
        db_bucket_size: 32768
        db_enzyme: trypsin
        db_max_missed_cleavages: 2
        g_ims_tolerance: 0.01
        g_ims_tolerance_unit: abs
        g_tolerance_units:
        - da
        - da
        g_tolerances:
        - 0.02
        - 0.01
        ion_charges:
        - 1
        ion_mz_range:
        - 250
        - 2000.0
        ion_series: by
        peptide_length_range:
        - 7
        - 25
        peptide_mz_range:
        - 400
        - 2000
        precursor_charges:
        - 2
        - 3
        run_allowed_fails: 5000
        run_debug_log_frequency: 50
        run_deconvolute_spectra: true
        run_max_peaks: 20000
        run_max_peaks_per_spec: 5000
        run_max_peaks_per_window: 150
        run_min_correlation_score: 0.5
        run_min_intensity_ratio: 0.01
        run_min_peak_intensity: 100
        run_parallelism: 1
        run_scaling_limits:
        - 0.01
        - 0.9
        run_scaling_ratio: 0.01
        run_window_size: 21
        scoring_score_function: Hyperscore
    outs:
    - path: results/orbi/hela.diadem.csv
      md5: 028440c372e93c1e9fb89360bee8f41e
      size: 119421851
    - path: results/orbi/hela_log_score_histogram_peptide.png
      md5: bc45a78f4f79902bef3278e6f16543eb
      size: 24313
    - path: results/orbi/hela_metrics.toml
      md5: 00c10ad7d7b592f627a2f49da01e27f5
      size: 169
    - path: results/orbi/hela_peptide_qval.png
      md5: 5141b0fe45e76677b268e292b6ae57ab
      size: 22108
    - path: results/orbi/hela_runtime.toml
      md5: e69d1cc04d3abedba9c9bc2f2bb72cf1
      size: 28
    - path: results/orbi/hela_score_histogram_peptide.png
      md5: 58f46aa4eab2679beb13209eb8165ad8
      size: 24824
    - path: results/orbi/hela_score_histogram_psm.png
      md5: dc444a1aac6c00b7684e0e935d5d7352
      size: 21175
  orbi_narrow_run_hela:
    cmd: mkdir -p results/narrow_orbi && python src/run.py --config configs/orbi.toml
      --fasta profiling_data/UP000005640_9606_crap.fasta --ms_data profiling_data/23aug2017_hela_serum_timecourse_4mz_narrow_3.mzML
      --output results/narrow_orbi/hela --threads 4 && python src/plot_results.py
      results/narrow_orbi --prefix hela
    deps:
    - path: profiling_data/23aug2017_hela_serum_timecourse_4mz_narrow_3.mzML
      md5: 678d652ab60b0e4aa3c4329f22e9297b
      size: 1696580265
    - path: profiling_data/UP000005640_9606_crap.fasta
      md5: 6a22e753f0e35eae9e0bf3d95759d089
      size: 13676378
    - path: src/plot_results.py
      md5: 40c50f61109cef915787809f114d4534
      size: 4144
    - path: src/run.py
      md5: f966b8a2ebd379bccd7fdb238376be5a
      size: 1096
    params:
      configs/orbi.toml:
        db_bucket_size: 32768
        db_enzyme: trypsin
        db_max_missed_cleavages: 2
        g_ims_tolerance: 0.01
        g_ims_tolerance_unit: abs
        g_tolerance_units:
        - da
        - da
        g_tolerances:
        - 0.02
        - 0.01
        ion_charges:
        - 1
        ion_mz_range:
        - 250
        - 2000.0
        ion_series: by
        peptide_length_range:
        - 7
        - 25
        peptide_mz_range:
        - 400
        - 2000
        precursor_charges:
        - 2
        - 3
        run_allowed_fails: 5000
        run_debug_log_frequency: 50
        run_deconvolute_spectra: true
        run_max_peaks: 20000
        run_max_peaks_per_spec: 5000
        run_max_peaks_per_window: 150
        run_min_correlation_score: 0.5
        run_min_intensity_ratio: 0.01
        run_min_peak_intensity: 100
        run_parallelism: 1
        run_scaling_limits:
        - 0.01
        - 0.9
        run_scaling_ratio: 0.01
        run_window_size: 21
        scoring_score_function: Hyperscore
    outs:
    - path: results/narrow_orbi/hela.diadem.csv
      md5: f3fe40369d9d89feccc82753915c23a7
      size: 85762625
    - path: results/narrow_orbi/hela_log_score_histogram_peptide.png
      md5: 8dd53d610c406e2f1f7af314e11cec2a
      size: 23549
    - path: results/narrow_orbi/hela_metrics.toml
      md5: 3150139cbcc99118d876785bbaad7586
      size: 169
    - path: results/narrow_orbi/hela_peptide_qval.png
      md5: cfb49a914b03ab05d0a59e483cd74450
      size: 22987
    - path: results/narrow_orbi/hela_runtime.toml
      md5: dd2045b6e10e20c46396e9eed57b137d
      size: 29
    - path: results/narrow_orbi/hela_score_histogram_peptide.png
      md5: 9cfe596a79edaec5f4c0e1138fe18c89
      size: 23365
    - path: results/narrow_orbi/hela_score_histogram_psm.png
      md5: 733f1a066d3a85055f2b4dac8c176590
      size: 20878
